jQuery.fn.xeyes=function(options){options=$.extend({padding:0,radius:'natural',onHover:'follow',position:'center',trigger:window},options);var padding=parseInt(options.padding,10);this.each(function(index,iris){var ir=$(iris),$eye=ir.parent();ir.css('position','absolute').parent().css('position','relative');var iW=ir.outerWidth(),iH=ir.outerHeight(),W=$eye.width(),H=$eye.height(),X=W/2-iW/2,Y=H/2-iH/2;if(options.radius=='circular'&&W>H)W=H;else if(options.radius=='circular'){H=W;}ir.css("left",X+"px").css("top",Y+"px");var offset=ir.offset(),offX=offset.left+iW/2,offY=offset.top+iH/2,position={top:{degree:90},bottom:{degree:-90},left:{degree:180},right:{degree:0},topRight:{degree:45},topLeft:{degree:135},bottomRight:{degree:-45},bottomLeft:{degree:-135}};if(options.position.x)ir.css("left",X-parseInt(options.position.x,10)+"px").css("top",Y-parseInt(options.position.y,10)+"px");else if(options.position.degree!==undefined){var deg=options.position.degree*Math.PI/-180;ir.css("left",X+Math.cos(deg)*(W/2-iW/2-padding)+"px").css("top",Y+Math.sin(deg)*(H/2-iH/2-padding)+"px");}else if(options.position=="center"){ir.css("left",X+"px").css("top",Y+"px");}else{var deg2=position[options.position].degree*Math.PI/-180;ir.css("left",X+Math.cos(deg2)*(W/2-iW/2-padding)+"px").css("top",Y+Math.sin(deg2)*(H/2-iH/2-padding)+"px");}$(options.trigger).mousemove(function(e){var degree=Math.atan((e.pageY-offY)/(e.pageX-offX)),direction=(offX>=e.pageX)?-1:1,newX=Math.cos(degree)*(W/2-iW/2-padding)*direction,newY=Math.sin(degree)*(H/2-iH/2-padding)*direction,radius=Math.sqrt(Math.pow(newX,2)+Math.pow(newY,2)),distance=Math.sqrt(Math.pow(e.pageY-offY,2)+Math.pow(e.pageX-offX,2));if(radius>distance&&options.onHover.toLowerCase()!='nofollow')ir.css("left",(e.pageX-offX+X)+"px").css("top",(e.pageY-offY+Y)+"px");else ir.css("left",X+newX+"px").css("top",Y+newY+"px");});});};